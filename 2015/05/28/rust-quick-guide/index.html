<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Rustå¿«é€Ÿå…¥é—¨ | Lin-H&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="Rust,å¿«é€Ÿå…¥é—¨,å…¥é—¨,quick,guide">
  
  <meta name="description" content="Rustç®€ä»‹
Rustæ˜¯ä¸€ç§ç¼–è¯‘è¯­è¨€ï¼Œä¸Cå’ŒGoä¸€æ ·ç¼–è¯‘åç”Ÿæˆçš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚Rustä¸“æ³¨äºå®‰å…¨ï¼Œé€Ÿåº¦ï¼Œå¹¶å‘ã€‚å¹¶ä¸”ä¸éœ€è¦åƒåœ¾å›æ”¶å™¨ï¼Œè¿™ä¹Ÿè®©Ruståœ¨æŸäº›æƒ…å†µä¸‹æ¯”å…¶ä»–è¯­è¨€æ›´å¥½ç”¨ã€‚æ¯”å¦‚ä¸å…¶ä»–è¯­è¨€æ··åˆç¼–å†™åµŒå…¥å…¶ä¸­ã€ç¼–å†™åº•å±‚è½¯ä»¶ï¼Œé©±åŠ¨æˆ–æ“ä½œç³»ç»Ÿã€‚Ruståœ¨ç¼–è¯‘æœŸé—´ä¼šå°†è¯­æ³•é”™è¯¯å’Œä¸å®‰å…¨å› ç´ æœ€å¤§ç¨‹åº¦åœ°æ‰¾å‡ºæ¥ï¼Œä»è€Œé¿å…åœ¨ç¨‹åºè¿è¡Œæ—¶å‡ºç°é—®é¢˜ã€‚Rustè¯­è¨€å¯ä»¥èƒœä»»ä¸‰ä¸ªè½¯ä»¶å±‚æ¬¡çš„å¼€å‘ã€‚å¹¶ä¸”åœ¨ä»Šå¹´5æœˆ15å·å‘å¸ƒäº†ç¬¬ä¸€ä¸ª">
<meta property="og:type" content="article">
<meta property="og:title" content="Rustå¿«é€Ÿå…¥é—¨">
<meta property="og:url" content="http://lin-h.com/2015/05/28/rust-quick-guide/index.html">
<meta property="og:site_name" content="Lin-H's Blog">
<meta property="og:description" content="Rustç®€ä»‹
Rustæ˜¯ä¸€ç§ç¼–è¯‘è¯­è¨€ï¼Œä¸Cå’ŒGoä¸€æ ·ç¼–è¯‘åç”Ÿæˆçš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚Rustä¸“æ³¨äºå®‰å…¨ï¼Œé€Ÿåº¦ï¼Œå¹¶å‘ã€‚å¹¶ä¸”ä¸éœ€è¦åƒåœ¾å›æ”¶å™¨ï¼Œè¿™ä¹Ÿè®©Ruståœ¨æŸäº›æƒ…å†µä¸‹æ¯”å…¶ä»–è¯­è¨€æ›´å¥½ç”¨ã€‚æ¯”å¦‚ä¸å…¶ä»–è¯­è¨€æ··åˆç¼–å†™åµŒå…¥å…¶ä¸­ã€ç¼–å†™åº•å±‚è½¯ä»¶ï¼Œé©±åŠ¨æˆ–æ“ä½œç³»ç»Ÿã€‚Ruståœ¨ç¼–è¯‘æœŸé—´ä¼šå°†è¯­æ³•é”™è¯¯å’Œä¸å®‰å…¨å› ç´ æœ€å¤§ç¨‹åº¦åœ°æ‰¾å‡ºæ¥ï¼Œä»è€Œé¿å…åœ¨ç¨‹åºè¿è¡Œæ—¶å‡ºç°é—®é¢˜ã€‚Rustè¯­è¨€å¯ä»¥èƒœä»»ä¸‰ä¸ªè½¯ä»¶å±‚æ¬¡çš„å¼€å‘ã€‚å¹¶ä¸”åœ¨ä»Šå¹´5æœˆ15å·å‘å¸ƒäº†ç¬¬ä¸€ä¸ª">
<meta property="og:updated_time" content="2016-01-15T06:40:59.367Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Rustå¿«é€Ÿå…¥é—¨">
<meta name="twitter:description" content="Rustç®€ä»‹
Rustæ˜¯ä¸€ç§ç¼–è¯‘è¯­è¨€ï¼Œä¸Cå’ŒGoä¸€æ ·ç¼–è¯‘åç”Ÿæˆçš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚Rustä¸“æ³¨äºå®‰å…¨ï¼Œé€Ÿåº¦ï¼Œå¹¶å‘ã€‚å¹¶ä¸”ä¸éœ€è¦åƒåœ¾å›æ”¶å™¨ï¼Œè¿™ä¹Ÿè®©Ruståœ¨æŸäº›æƒ…å†µä¸‹æ¯”å…¶ä»–è¯­è¨€æ›´å¥½ç”¨ã€‚æ¯”å¦‚ä¸å…¶ä»–è¯­è¨€æ··åˆç¼–å†™åµŒå…¥å…¶ä¸­ã€ç¼–å†™åº•å±‚è½¯ä»¶ï¼Œé©±åŠ¨æˆ–æ“ä½œç³»ç»Ÿã€‚Ruståœ¨ç¼–è¯‘æœŸé—´ä¼šå°†è¯­æ³•é”™è¯¯å’Œä¸å®‰å…¨å› ç´ æœ€å¤§ç¨‹åº¦åœ°æ‰¾å‡ºæ¥ï¼Œä»è€Œé¿å…åœ¨ç¨‹åºè¿è¡Œæ—¶å‡ºç°é—®é¢˜ã€‚Rustè¯­è¨€å¯ä»¥èƒœä»»ä¸‰ä¸ªè½¯ä»¶å±‚æ¬¡çš„å¼€å‘ã€‚å¹¶ä¸”åœ¨ä»Šå¹´5æœˆ15å·å‘å¸ƒäº†ç¬¬ä¸€ä¸ª">
  
  
    <link rel="icon" href="favicon.png">
  
  
 <link href='//fonts.useso.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' media="none" onload="if(media!='all')media='all'" type='text/css'>
 <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" media="none" onload="if(media!='all')media='all'" type="text/css">


  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="//apps.bdimg.com/libs/fontawesome/4.4.0/css/font-awesome.min.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-72700853-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  

  
</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><i class="logo" style="background-image: url(/css/images/logo.png)"></i><span class="site-title">Lin-H&#39;s Blog</span></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/.">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
      </nav>
      
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="http://linhsblog-10013469.image.myqcloud.com/css/images/avatar.png"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
      
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://lin-h.com"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
        
          <td><a class="main-nav-link" href="/.">Home</a></td>
        
          <td><a class="main-nav-link" href="/archives">Archives</a></td>
        
          <td><a class="main-nav-link" href="/categories">Categories</a></td>
        
          <td><a class="main-nav-link" href="/tags">Tags</a></td>
        
        <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://lin-h.com"></form>
        </td>
      </tr>
    </table>
  </div>
</header>

    <div class="outer">
      
        <aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <img id="avatar" src="http://linhsblog-10013469.image.myqcloud.com/css/images/avatar.png">
      <h2 id="name">Lin-H</h2>
      <h3 id="title">Web Developer</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Guangzhou, China</span>
      <a id="follow" href="https://github.com/Lin-H/">FOLLOW</a>
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        9
        <span>posts</span>
      </div>
      <div class="article-info-block">
        12
        <span>tags</span>
      </div>
    </div>
    
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
          
          <td><a href="http://github.com/Lin-H" target="_blank" title="github"><i class="fa fa-github"></i></a></td>
          
          <td><a href="http://weibo.com/u/2605326267" target="_blank" title="weibo"><i class="fa fa-weibo"></i></a></td>
          
          <td><a href="/7é»‘æ—" target="_blank" title="weibo_name"><i class="fa fa-weibo_name"></i></a></td>
          
          <td><a href="/atom.xml" target="_blank" title="rss"><i class="fa fa-rss"></i></a></td>
          
        </tr>
      </table>
    </div>
    
    
  </div>
</aside>

      
      <section id="main"><article id="post-rust-quick-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      
	
		<img src="http://linhsblog-10013469.image.myqcloud.com/images/rust-icon.png" class="article-banner">
	



    
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Rustå¿«é€Ÿå…¥é—¨
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2015/05/28/rust-quick-guide/">
      <time datetime="2015-05-28T10:05:44.000Z" itemprop="datePublished">2015-05-28</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Rust/">Rust</a>
  </div>

          
          <div class="article-date">
            <span id="busuanzi_container_page_pv" style="display: none">
              <i class="fa fa-eye"></i>
              <span id="busuanzi_value_page_pv"></span>
            </span>
          </div>
          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <h2 id="rustç®€ä»‹">Rustç®€ä»‹</h2>
<p><code>Rust</code>æ˜¯ä¸€ç§ç¼–è¯‘è¯­è¨€ï¼Œä¸<code>C</code>å’Œ<code>Go</code>ä¸€æ ·ç¼–è¯‘åç”Ÿæˆçš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<code>Rust</code>ä¸“æ³¨äº<code>å®‰å…¨</code>ï¼Œ<code>é€Ÿåº¦</code>ï¼Œ<code>å¹¶å‘</code>ã€‚å¹¶ä¸”ä¸éœ€è¦åƒåœ¾å›æ”¶å™¨ï¼Œè¿™ä¹Ÿè®©<code>Rust</code>åœ¨æŸäº›æƒ…å†µä¸‹æ¯”å…¶ä»–è¯­è¨€æ›´å¥½ç”¨ã€‚æ¯”å¦‚ä¸å…¶ä»–è¯­è¨€æ··åˆç¼–å†™åµŒå…¥å…¶ä¸­ã€ç¼–å†™åº•å±‚è½¯ä»¶ï¼Œé©±åŠ¨æˆ–æ“ä½œç³»ç»Ÿã€‚<code>Rust</code>åœ¨ç¼–è¯‘æœŸé—´ä¼šå°†è¯­æ³•é”™è¯¯å’Œä¸å®‰å…¨å› ç´ æœ€å¤§ç¨‹åº¦åœ°æ‰¾å‡ºæ¥ï¼Œä»è€Œé¿å…åœ¨ç¨‹åºè¿è¡Œæ—¶å‡ºç°é—®é¢˜ã€‚<code>Rust</code>è¯­è¨€å¯ä»¥èƒœä»»ä¸‰ä¸ªè½¯ä»¶å±‚æ¬¡çš„å¼€å‘ã€‚å¹¶ä¸”åœ¨ä»Šå¹´5æœˆ15å·å‘å¸ƒäº†ç¬¬ä¸€ä¸ª1.0.0æ­£å¼ç‰ˆæœ¬ã€‚</p>
<a id="more"></a>
<ul>
<li>
<p>(åº•å±‚)ç³»ç»Ÿåº•å±‚å¼€å‘ï¼šè£¸é‡‘å±(bare metal)ã€æ“ä½œç³»ç»Ÿ(OS)ã€å†…æ ¸(kernel)ã€å†…æ ¸æ¨¡å—(mod)ç­‰ ( <a href="https://github.com/charliesome/rustboot" target="_blank" rel="external">rustboot</a>, <a href="https://github.com/ryanra/RustOS" target="_blank" rel="external">rustos</a>, <a href="https://github.com/thepowersgang/rust-barebones-kernel" target="_blank" rel="external">barebones</a>)</p>
</li>
<li>
<p>(ä¸­å±‚)ç³»ç»Ÿåº”ç”¨å¼€å‘ï¼šè™šæ‹Ÿæœº(VM)ã€å®¹å™¨(Container)ã€æ•°æ®åº“/æ¸¸æˆ/Web/Ftp/DnsæœåŠ¡å™¨ã€æµè§ˆå™¨å¼•æ“ã€æ¨¡æ‹Ÿå™¨ç­‰ (<a href="https://github.com/servo/servo" target="_blank" rel="external">Servoæµè§ˆå™¨å¼•æ“</a>, <a href="https://github.com/PistonDevelopers/piston" target="_blank" rel="external">Pistonæ¸¸æˆå¼•æ“</a>, <a href="https://github.com/hyperium/hyper" target="_blank" rel="external">Hyper</a> HTTPæœåŠ¡å™¨, <a href="https://github.com/pcwalton/sprocketnes" target="_blank" rel="external">SprocketNES</a> NESæ¨¡æ‹Ÿå™¨, <a href="https://github.com/nukep/llamadb" target="_blank" rel="external">LlamaDB</a>æ•°æ®åº“)</p>
</li>
<li>
<p>(ä¸Šå±‚)æ™®é€šåº”ç”¨å¼€å‘ï¼šç¼–è¯‘å™¨ã€æµè§ˆå™¨ã€æ¶ˆæ¯æ¨é€ç³»ç»Ÿã€Webåº”ç”¨ç³»ç»Ÿã€ç®¡ç†ä¿¡æ¯ç³»ç»Ÿã€å…¶ä»–ç­‰ç­‰ (<a href="https://github.com/rust-lang/rust/tree/master/src/librustc" target="_blank" rel="external">Rustcç¼–è¯‘å™¨</a>, <a href="https://github.com/rust-lang/cargo" target="_blank" rel="external">Cargoé¡¹ç›®ç®¡ç†</a>, <a href="https://github.com/iron/iron" target="_blank" rel="external">Iron</a> &amp; <a href="https://github.com/nickel-org/nickel.rs" target="_blank" rel="external">Nickel</a> Webå¼€å‘æ¡†æ¶, <a href="https://github.com/PistonDevelopers/conrod" target="_blank" rel="external">Conrod</a> GUIåº“)</p>
</li>
</ul>
<h1>ç›®å½•</h1>
<ul>
<li><a href="#variable-bindings-%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A">Variable Bindings</a></li>
<li><a href="#const-and-static">Const and Static</a></li>
<li><a href="#functions-%E5%87%BD%E6%95%B0">Functions</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B-primitive-types">Primitive-types</a></li>
<li><a href="#comments-%E6%B3%A8%E9%87%8A">Comments</a></li>
<li><a href="#control-flow-statement-%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5">Control flow statement</a></li>
<li><a href="#ownership">Ownership</a></li>
<li><a href="#borrowing">Borrowing</a></li>
<li><a href="#lifetimes">Lifetimes</a></li>
<li><a href="#structs">Structs</a></li>
<li><a href="#enums">Enums</a></li>
<li><a href="#match">Match</a></li>
<li><a href="#patterns">Patterns</a></li>
<li><a href="#method-syntax">Method Syntax</a></li>
<li><a href="#vectors-%E5%90%91%E9%87%8F">Vectors</a></li>
<li><a href="#strings">Strings</a></li>
<li><a href="#generics-%E6%B3%9B%E5%9E%8B">Generics</a></li>
<li><a href="#traits">Traits</a></li>
<li><a href="#drop">Drop</a></li>
<li><a href="#trait-objects">Trait Objects</a></li>
<li><a href="#closures-%E9%97%AD%E5%8C%85">Closures</a></li>
<li><a href="#universal-function-call-syntax">Universal Function Call Syntax</a></li>
<li><a href="#attributes">Attributes</a></li>
<li><a href="#type-aliases-%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D">type Aliases</a></li>
<li><a href="#casting-between-types-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2">Casting Between Types</a></li>
<li><a href="#operators-and-overloading-%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%92%8C%E9%87%8D%E8%BD%BD">Operators and Overloading</a></li>
</ul>
<h2 id="variable-bindings-å˜é‡ç»‘å®š">Variable Bindings(å˜é‡ç»‘å®š)</h2>
<p>å®šä¹‰å˜é‡ç»‘å®šä½¿ç”¨<code>let</code>è¯­å¥ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨<code>Rust</code>ä¸­å¤„äºå®‰å…¨è€ƒè™‘ï¼Œå®šä¹‰çš„å˜é‡é»˜è®¤éƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œå¦‚æœéœ€è¦å®šä¹‰å¯ä¿®æ”¹çš„å˜é‡éœ€è¦åœ¨å˜é‡å‰åŠ ä¸Š<code>mut</code>å…³é”®å­—ã€‚</p>
</blockquote>
<p><code>Rust</code>æ˜¯é™æ€ç±»å‹è¯­è¨€(statically typed language)ï¼Œåœ¨å®šä¹‰å˜é‡æ—¶è‹¥ä¸æŒ‡å®šå˜é‡ç±»å‹ï¼Œ<code>Rust</code>ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ¨å¯¼(type inference)ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">5</span>;    <span class="comment">//ç±»å‹æ¨å¯¼ï¼Œå®šä¹‰çš„xç±»å‹ä¸ºi32å€¼ä¸º5</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> x: <span class="keyword">i32</span> = <span class="number">10</span>;    <span class="comment">//å®šä¹‰ä¸€ä¸ªç±»å‹ä¸ºi32ï¼Œå€¼ä¸º10ï¼Œå¯ä¿®æ”¹çš„å˜é‡ç»‘å®š</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="const-and-static">const and static</h2>
<p>å®šä¹‰å¸¸é‡</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> N: <span class="keyword">i32</span> = <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰å…¨å±€(é™æ€)å˜é‡ç»‘å®š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> N: <span class="keyword">i32</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">mut</span> N: <span class="keyword">i32</span> = <span class="number">5</span>;</span><br><span class="line"><span class="comment">//å› ä¸ºæ˜¯å…¨å±€å˜é‡ï¼Œä¿®æ”¹æ—¶éœ€è¦åœ¨unsafeå†…</span></span><br><span class="line"><span class="keyword">unsafe</span> &#123;</span><br><span class="line">    N += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"N: &#123;&#125;"</span>, N);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="functions-å‡½æ•°">Functions(å‡½æ•°)</h2>
<p><code>Rust</code>ä½¿ç”¨<code>fn</code>å…³é”®å­—æ¥å£°æ˜å‡½æ•°ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªæ— å‚æ•°çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">foo</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"Hello Rust"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªæœ‰2ä¸ªå‚æ•°çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">print_sum</span></span>(x: <span class="keyword">i32</span>, y: <span class="keyword">i32</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"sum is: &#123;&#125;"</span>, x + y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šå‡½æ•°çš„å‚æ•°å¿…é¡»æŒ‡å®šç±»å‹ã€‚</p>
</blockquote>
<p>å‡½æ•°è¿”å›å€¼ï¼Œåœ¨å‡½æ•°å£°æ˜ä¸­ä½¿ç”¨<code>-&gt;</code>æŒ‡å®šè¿”å›çš„å€¼çš„ç±»å‹ã€‚å‡½æ•°çš„æœ€åä¸€è¡ŒæŒ‡å®šäº†è¦è¿”å›çš„å€¼ï¼Œè€Œä¸”è¿™ä¸€è¡Œä¸èƒ½ä»¥åˆ†å·<code>;</code>ç»“å°¾ï¼Œå¦åˆ™æŠ¥é”™ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>return</code>å…³é”®å­—æ¥è¿”å›ä¸€ä¸ªå€¼ã€‚ä½†å¦‚æœéœ€è¦è¿”å›çš„å€¼åœ¨å‡½æ•°æœ€åä¸€è¡Œï¼Œé€šå¸¸ä¸ä½¿ç”¨<code>return</code>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›ä¸€ä¸ª32ä½æ•´æ•°ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">add_one</span></span>(x: <span class="keyword">i32</span>) -&gt; <span class="keyword">i32</span> &#123;</span><br><span class="line">    x + <span class="number">1</span>  <span class="comment">//return x + 1;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Rust</code>æ˜¯åŸºäºè¡¨è¾¾å¼çš„è¯­è¨€ï¼Œåœ¨<code>Rust</code>ä¸­åªæœ‰ä¸¤ç§è¯­å¥(statements)ï¼Œå£°æ˜è¯­å¥(declaration statements) å’Œ è¡¨è¾¾å¼è¯­å¥(expression statements)ï¼Œè¡¨è¾¾å¼è¯­å¥çš„ä½œç”¨å°±æ˜¯ä½¿è¡¨è¾¾å¼ä¸è¿”å›å€¼ã€‚å…¶ä»–çš„å…¨éƒ½æ˜¯è¡¨è¾¾å¼ã€‚ä¸»è¦åŒºåˆ«ä¸ºè¡¨è¾¾å¼è¿”å›å€¼ï¼Œè¯­å¥ä¸è¿”å›å€¼ã€‚èµ‹å€¼è¡¨è¾¾å¼çš„è¿”å›å€¼æ˜¯ç©ºçš„å…ƒç»„<code>()</code>ã€‚</p>
<p>è‹¥å‡½æ•°çš„è¿”å›å€¼æ˜¯<code>!</code>ï¼Œç§°ä¸º<code>å‘æ•£å‡½æ•°(Diverging functions)</code>ï¼Œä»£è¡¨è¯¥å‡½æ•°ä¸ä¼šè¿”å›ã€‚å¦‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">diverges</span></span>() -&gt; ! &#123;</span><br><span class="line">    <span class="built_in">panic!</span>(<span class="string">"This function never returns!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>panic!()</code>å®(ä»¥!ç»“å°¾çš„éƒ½æ˜¯å®ï¼Œç±»ä¼¼çš„è¿˜æœ‰<code>println!()</code>)çš„ä½œç”¨æ˜¯ä½¿å½“å‰çº¿ç¨‹å´©æºƒé€€å‡ºï¼Œå¹¶è¾“å‡ºä¿¡æ¯ã€‚å› ä¸ºè¿è¡Œè¯¥å‡½æ•°çš„çº¿ç¨‹å´©æºƒé€€å‡ºäº†ï¼Œæ‰€ä»¥è¯¥å‡½æ•°ä¸ä¼šè¿”å›ã€‚(æˆ‘æš‚æ—¶ä¸çŸ¥é“è¿™ç±»å‘æ•£å‡½æ•°æœ‰ä»€ä¹ˆç”¨-_-)</p>
<h2 id="åŸºæœ¬ç±»å‹-primitive-types">åŸºæœ¬ç±»å‹(Primitive Types)</h2>
<ul>
<li>Booleans</li>
<li>char Unicode 4å­—èŠ‚</li>
<li>Numeric i8 i16 i32 i64 u8 u16 u32 u64 isize usize f32 f64</li>
<li>Arrays æ•°ç»„çš„ç±»å‹ä¸º<code>[T; N]</code>ã€‚<code>T</code>ä¸ºç±»å‹ï¼Œ<code>N</code>ä¸ºæ•°ç»„é•¿åº¦</li>
<li>Slices <code>Slices</code>æ˜¯å¯¹å¦ä¸€ä¸ªæ•°æ®ç»“æ„çš„å¼•ç”¨ï¼Œç›®çš„æ˜¯å®‰å…¨é«˜æ•ˆåœ°å¯¹å˜é‡ä¸­çš„éƒ¨åˆ†æ•°æ®è¿›è¡Œå¼•ç”¨ï¼Œç±»å‹ä¸º<code>&amp;[T]</code></li>
<li>str å­—ç¬¦ä¸²ï¼Œç»å¸¸ä»¥å¼•ç”¨æ–¹å¼<code>&amp;str</code>æ¥ä½¿ç”¨</li>
<li>Tuples å…ƒç»„ä¸æ•°ç»„ç›¸ä¼¼ï¼Œä½†å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹</li>
<li>Functions å‡½æ•°æŒ‡é’ˆç±»å‹</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Booleans</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">let</span> y: <span class="keyword">bool</span> = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// char</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="string">'x'</span>;</span><br><span class="line"><span class="keyword">let</span> two_hearts = 'ğŸ’•';</span><br><span class="line"></span><br><span class="line"><span class="comment">// Numeric</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">42</span>; <span class="comment">// x ç±»å‹ä¸º i32</span></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">1.0</span>; <span class="comment">// y ç±»å‹ä¸º f64</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Arrays</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> m = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// m: [i32; 3]</span></span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">0</span>; <span class="number">20</span>]; <span class="comment">// a: [i32; 20]  åˆå§‹åŒ–æ•°ç»„çš„å€¼ä¸º0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Slices</span></span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> middle = &amp;a[<span class="number">1</span>..<span class="number">4</span>]; <span class="comment">// middleä¸­åªåŒ…å«aæ•°ç»„ä¸­çš„[1,2,3]</span></span><br><span class="line"><span class="keyword">let</span> complete = &amp;a[..]; <span class="comment">// completeä¸­åŒ…å«aæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Tuples</span></span><br><span class="line"><span class="keyword">let</span> x = (<span class="number">1</span>, <span class="string">"hello"</span>);</span><br><span class="line"><span class="keyword">let</span> x: (<span class="keyword">i32</span>, &amp;<span class="keyword">str</span>) = (<span class="number">1</span>, <span class="string">"hello"</span>);</span><br><span class="line"><span class="keyword">let</span> y = x.<span class="number">0</span>;<span class="comment">// è®¿é—®å…ƒç»„xçš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Functions</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">foo</span></span>(x: <span class="keyword">i32</span>) -&gt; <span class="keyword">i32</span> &#123; x &#125;</span><br><span class="line"><span class="keyword">let</span> x: <span class="function"><span class="keyword">fn</span></span>(<span class="keyword">i32</span>) -&gt; <span class="keyword">i32</span> = foo;</span><br><span class="line"><span class="comment">// x ä¸ºfooå‡½æ•°çš„æŒ‡é’ˆï¼Œå‡½æ•°å‚æ•°ä¸ºi32ç±»å‹ï¼Œè¿”å›ç±»å‹ä¸ºi32</span></span><br></pre></td></tr></table></figure>
<h2 id="comments-æ³¨é‡Š">Comments(æ³¨é‡Š)</h2>
<p><code>Rust</code>æœ‰ä¸¤ç§æ³¨é‡Šï¼Œè¡Œæ³¨é‡Š(line comments)å’Œæ–‡æ¡£æ³¨é‡Š(doc comments)ã€‚è¡Œæ³¨é‡Šè·ŸCè¯­è¨€ä¸€æ ·ä½¿ç”¨<code>//</code>ï¼ŒæŠŠå½“å‰è¡Œæ³¨é‡Šæ‰ã€‚æ–‡æ¡£æ³¨é‡Šä½¿ç”¨<code>///</code>ï¼Œè€Œä¸”æ”¯æŒ<code>Markdown</code>è¯­æ³•ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>rustdoc</code>å°†æ–‡æ¡£æ³¨é‡Šç”Ÿæˆä¸ºHTMLæ–‡æ¡£ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///Adds one to the number given.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///# Examples</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///```</span></span><br><span class="line"><span class="comment">///let five = 5;</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">///assert_eq!(6, add_one(5));</span></span><br><span class="line"><span class="comment">///```</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">add_one</span></span>(x: <span class="keyword">i32</span>) -&gt; <span class="keyword">i32</span> &#123;</span><br><span class="line">    x + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="control-flow-statement-æ§åˆ¶è¯­å¥">Control flow statement(æ§åˆ¶è¯­å¥)</h2>
<h3 id="if">if</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> x == <span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"x is five!"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> x == <span class="number">6</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"x is six!"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"x is not five or six :("</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="for">for</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, x); <span class="comment">// x: i32</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯ä»¥æŠ½è±¡ä¸º</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> expression &#123;</span><br><span class="line">    code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è·Ÿ<code>Python</code>çš„forè¯­å¥æœ‰ç‚¹åƒï¼Œ<code>expression</code>æ˜¯ä¸€ä¸ªè¿­ä»£å™¨(iterator)å³ä¸€ä¸ªå¯ä»¥è¿›è¡Œéå†çš„å¯¹è±¡ï¼Œæ¯”å¦‚æ•°ç»„ã€‚</p>
<h3 id="while">while</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> x &gt; <span class="number">1</span> &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">    <span class="keyword">if</span> done == <span class="keyword">true</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">loop</span> &#123;</span><br><span class="line">    doSomething();</span><br><span class="line">    <span class="comment">//ç­‰ä»·äº while trueéœ€è¦breakè·³å‡ºå¾ªç¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ownership">Ownership</h2>
<p><code>Ownership</code>ç±»ä¼¼äºä½œç”¨åŸŸï¼Œåœ¨<code>Rust</code>ç¨‹åºä¸­å˜é‡ä¸€æ—¦ç¦»å¼€ä½œç”¨åŸŸå°±ä¼šè¢«é‡Šæ”¾ã€‚åœ¨å˜é‡ç»‘å®šä¸­ï¼Œæ²¡æœ‰å®ç°<code>Copy</code>ç‰¹æ€§çš„ç±»å‹(å¦‚Vec<i32>)åœ¨è¿›è¡Œèµ‹å€¼æ—¶ï¼Œä¼ é€’çš„æ˜¯å†…å­˜åœ°å€ï¼Œè€Œ<code>Rust</code>å‡ºäºå®‰å…¨è€ƒè™‘å½“ä¸¤ä¸ªå˜é‡ç»‘å®šåˆ°åŒä¸€å€¼ä¸Šæ—¶ï¼Œ<code>Rust</code><br>ä¼šå°†åŸæ¥çš„ç»‘å®šåˆ é™¤ï¼Œåœ¨å‡½æ•°ä¼ å‚æ—¶åŒæ ·å¦‚æ­¤ã€‚è€Œå®ç°äº†<code>Copy</code>çš„ç±»å‹(å¦‚åŸºæœ¬ç±»å‹i32)åœ¨è¿›è¡Œèµ‹å€¼æ—¶ä¼ é€’çš„å°±æ˜¯å€¼ã€‚</i32></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> v = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> v2 = v;</span><br><span class="line"><span class="built_in">println!</span>(v)<span class="comment">//åœ¨è¿™é‡Œå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºvçš„å€¼([1, 2, 3]çš„åœ°å€)å·²ç»ä¼ ç»™v2äº†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> v = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> v2 = v;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">"v is: &#123;&#125;"</span>, v);<span class="comment">//åœ¨è¿™é‡Œå°±ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºvæ˜¯i32ç±»å‹ï¼Œä¼ é€’çš„æ˜¯å€¼ã€‚</span></span><br></pre></td></tr></table></figure>
<h2 id="borrowing">Borrowing</h2>
<p>å¦‚æœä¸€ä¸ªå˜é‡ä½œä¸ºå‚æ•°ä¼ å…¥äº†å‡½æ•°ä¸­ï¼Œé‚£ä¹ˆè¯¥å˜é‡çš„ä½œç”¨åŸŸå°±å˜äº†ï¼Œå˜ä¸ºåœ¨å‡½æ•°å†…ï¼Œæ‰€ä»¥åœ¨å‡½æ•°å¤–è¯¥å˜é‡å°±ä¸èƒ½ä½¿ç”¨äº†ã€‚åœ¨<code>Rust</code>ä¸­æœ‰<code>Borrowing</code>çš„æ¦‚å¿µï¼Œé€šè¿‡ç»™å‡½æ•°ä¼ å…¥å˜é‡çš„å¼•ç”¨æ¥è¾¾åˆ°&quot;å€Ÿç”¨&quot;çš„ç›®çš„ï¼Œä½¿å¾—å˜é‡åœ¨å‡½æ•°å¤–è¿˜èƒ½ç»§ç»­ä½¿ç”¨(Borrow Ownership)ã€‚å¼•ç”¨ä¸å˜é‡ç»‘å®šä¸€æ ·ï¼Œé»˜è®¤æ˜¯<code>ä¸å¯ä¿®æ”¹</code>çš„ã€‚å¼•ç”¨ç±»ä¼¼Cè¯­è¨€çš„æŒ‡é’ˆï¼Œå› ä¸ºåœ¨ä½¿ç”¨æ—¶å¾—åŠ ä¸Š<code>*</code>ç¬¦å·ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨ç±»å‹å‰åŠ ä¸Š&amp;ç¬¦å·è¡¨ç¤ºè¯¥ç±»å‹çš„å¼•ç”¨</span></span><br><span class="line"><span class="comment">//åœ¨å˜é‡å‰åŠ ä¸Š&amp;ç¬¦å·è¾¨è¯†å˜é‡çš„å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">foo</span></span>(v1: &amp;<span class="built_in">Vec</span>&lt;<span class="keyword">i32</span>&gt;, v2: &amp;<span class="built_in">Vec</span>&lt;<span class="keyword">i32</span>&gt;) -&gt; <span class="keyword">i32</span> &#123;</span><br><span class="line">    <span class="number">42</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> v1 = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> v2 = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> answer = foo(&amp;v1, &amp;v2);</span><br><span class="line"><span class="comment">// v1 å’Œ v2 è¿˜èƒ½ç»§ç»­ä½¿ç”¨</span></span><br></pre></td></tr></table></figure>
<p>è‹¥è¦åˆ›å»ºå¯ä¿®æ”¹çš„å¼•ç”¨ï¼Œéœ€è¦ä½¿ç”¨<code>&amp;mut</code>ï¼Œè€Œä¸”è¢«å¼•ç”¨çš„å˜é‡ä¹Ÿå¿…é¡»æ˜¯å¯ä¿®æ”¹çš„ã€‚ä¿®æ”¹å˜é‡çš„å¼•ç”¨ï¼Œå˜é‡ä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> x = <span class="number">5</span>;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> y = &amp;<span class="keyword">mut</span> x;</span><br><span class="line">    *y += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, x);</span><br><span class="line"><span class="comment">//è¾“å‡º6</span></span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªå¼•ç”¨(ä¸å¯ä¿®æ”¹çš„å¼•ç”¨)ï¼Œä½†åŒä¸€æ—¶é—´(å‰ä¸€ä¸ªå¯ä¿®æ”¹å¼•ç”¨æœªè¢«é‡Šæ”¾)åªèƒ½æœ‰ä¸€ä¸ªå¯ä¿®æ”¹å¼•ç”¨ã€‚è€Œä¸”å½“ä½œç”¨åŸŸ(scope)ä¸­å­˜åœ¨å˜é‡çš„å¯ä¿®æ”¹å¼•ç”¨(&amp;mut T)æ—¶ï¼Œæ— æ³•åˆ›å»ºè¯¥å˜é‡çš„å¼•ç”¨ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> x = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">&#123;                   </span><br><span class="line">    <span class="keyword">let</span> y = &amp;<span class="keyword">mut</span> x; <span class="comment">// -+ &amp;mut borrow starts here</span></span><br><span class="line">    *y += <span class="number">1</span>;        <span class="comment">//  |</span></span><br><span class="line">&#125;                   <span class="comment">// -+ ... and ends here</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, x);  <span class="comment">// &lt;- try to borrow x here</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­xçš„å¯ä¿®æ”¹å¼•ç”¨yåœ¨å¤§æ‹¬å·ä¸­åˆ›å»ºï¼Œå¹¶åœ¨å¤§æ‹¬å·å¤–é‡Šæ”¾ï¼Œä¹Ÿå°±æ˜¯é™å®šäº†yå˜é‡çš„ä½œç”¨åŸŸã€‚å¦‚æœå»æ‰é‚£ä¸¤ä¸ªå¤§æ‹¬å·æœ€åçš„<code>println!(&quot;{}&quot;, x)</code>ä¼šæŠ¥é”™ã€‚</p>
<p><code>Rust</code>è¿™ä¹ˆåšä¸»è¦æ˜¯ä¸ºäº†é¿å…<code>æ•°æ®ç«äº‰(data race)</code>å½“ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€æ—¶ï¼Œä¼šå‡ºç°è‡³å°‘ä¸€ä¸ªè®¿é—®ä¼šç­‰å¾…ï¼Œå¯¼è‡´æ“ä½œæ— æ³•åŒæ­¥ã€‚</p>
<p>å˜é‡çš„å®šä¹‰å¿…é¡»åœ¨å¼•ç”¨ä¹‹å‰ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> y: &amp;<span class="keyword">i32</span>;</span><br><span class="line"><span class="keyword">let</span> x = <span class="number">5</span>;</span><br><span class="line">y = &amp;x;</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, y);<span class="comment">//æ­¤å¤„ä¼šå‘ç”Ÿé”™è¯¯ï¼Œå› ä¸ºxçš„å®šä¹‰æ˜¯åœ¨yè¢«å®šä¹‰ä¹‹åã€‚</span></span><br><span class="line"><span class="comment">//æ­£ç¡®çš„å†™æ³•æ˜¯</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> y: &amp;<span class="keyword">i32</span>;</span><br><span class="line">y = &amp;x;</span><br></pre></td></tr></table></figure>
<h2 id="lifetimes">Lifetimes</h2>
<p>å¯¿å‘½(Lifetimes)æŒ‡å˜é‡ç»‘å®šåœ¨ä½œç”¨åŸŸå†…çš„èŒƒå›´ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå˜é‡çš„å¯¿å‘½å¯ä»¥æ˜¾ç¤ºæˆ–éšå¼å®šä¹‰ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éšå¼å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">foo</span></span>(x: &amp;<span class="keyword">i32</span>, y: &amp;<span class="keyword">mut</span> <span class="keyword">i32</span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºå®šä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">bar</span></span>&lt;<span class="string">'a</span>, <span class="string">'b</span>&gt;(x: &amp;<span class="string">'a</span> <span class="keyword">i32</span>, y: &amp;<span class="string">'b</span> <span class="keyword">mut</span> <span class="keyword">i32</span>) &#123;<span class="comment">//å®šä¹‰å¯ä¿®æ”¹å¼•ç”¨çš„å¯¿å‘½&amp;'b mut i32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰å˜é‡çš„å¯¿å‘½ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æŸä¸ªè¢«å¼•ç”¨çš„èµ„æºé‡Šæ”¾åï¼Œå¼•ç”¨å‡ºé”™ã€‚(ç±»ä¼¼Cä¸­çš„é‡æŒ‡é’ˆ)</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Foo&lt;<span class="string">'a</span>&gt; &#123;</span><br><span class="line">    x: &amp;<span class="string">'a</span> <span class="keyword">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x;                    <span class="comment">// -+ x goes into scope</span></span><br><span class="line">                              <span class="comment">//  |</span></span><br><span class="line">    &#123;                         <span class="comment">//  |</span></span><br><span class="line">        <span class="keyword">let</span> y = &amp;<span class="number">5</span>;           <span class="comment">// ---+ y goes into scope</span></span><br><span class="line">        <span class="keyword">let</span> f = Foo &#123; x: y &#125;; <span class="comment">// ---+ f goes into scope</span></span><br><span class="line">        x = &amp;f.x;             <span class="comment">//  | | error here</span></span><br><span class="line">    &#125;                         <span class="comment">// ---+ f and y go out of scope</span></span><br><span class="line">                              <span class="comment">//  |</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, x);        <span class="comment">//  |</span></span><br><span class="line">&#125;                             <span class="comment">// -+ x goes out of scope</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­<code>struct Foo</code>ä¸­çš„<code>x</code>çš„å¯¿å‘½å°±æ˜¯<code>y</code>ï¼Œå› ä¸º<code>x</code>è¢«èµ‹å€¼ä¸º<code>y</code>ã€‚è€Œ<code>y</code>çš„ä½œç”¨åŸŸä»…åœ¨ä¸¤ä¸ªå¤§æ‹¬å·å†…ï¼Œæ‰€ä»¥å½“<code>y</code>è¢«é‡Šæ”¾åï¼Œ<code>f</code>ä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚</p>
<p>æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡å¯¿å‘½<code>'static</code>ã€‚ä¹Ÿå°±æ˜¯é™æ€åŸŸï¼Œç±»ä¼¼C++ç±»ä¸­çš„é™æ€å˜é‡ã€‚å¯¿å‘½ä¸º<code>'static</code>çš„å˜é‡ç»‘å®šä¼šåœ¨æ•´ä¸ªç¨‹åºä¸­éƒ½å­˜åœ¨ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> FOO: <span class="keyword">i32</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> x: &amp;<span class="string">'static</span> <span class="keyword">i32</span> = &amp;FOO;</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°å‚æ•°çš„å¯¿å‘½</p>
<ul>
<li>å‡½æ•°çš„æ¯ä¸ªå‚æ•°è‹¥çœç•¥å®šä¹‰å¯¿å‘½ååˆ™æ¯ä¸ªå‚æ•°éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å¯¿å‘½åã€‚(åªæœ‰å¼•ç”¨ç±»å‹çš„å‚æ•°æ‰éœ€è¦å¯¿å‘½å)</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">args</span></span>&lt;T:ToCStr&gt;(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, args: &amp;[T]) -&gt; &amp;<span class="keyword">mut</span> Command <span class="comment">// çœç•¥</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">args</span></span>&lt;<span class="string">'a</span>, <span class="string">'b</span>, T:ToCStr&gt;(&amp;<span class="string">'a</span> <span class="keyword">mut</span> <span class="keyword">self</span>, args: &amp;<span class="string">'b</span> [T]) -&gt; &amp;<span class="string">'a</span> <span class="keyword">mut</span> Command <span class="comment">// æ˜¾ç¤ºå®šä¹‰</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªè¾“å…¥å¯¿å‘½(æ— è®ºæ˜¯å¦çœç•¥)ï¼Œè¯¥å¯¿å‘½åº”ç”¨äºå‡½æ•°çš„æ‰€æœ‰è¿”å›å€¼ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(buf: &amp;<span class="keyword">mut</span> [<span class="keyword">u8</span>]) -&gt; BufWriter; </span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>&lt;<span class="string">'a</span>&gt;(buf: &amp;<span class="string">'a</span> <span class="keyword">mut</span> [<span class="keyword">u8</span>]) -&gt; BufWriter&lt;<span class="string">'a</span>&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœæœ‰å¤šä¸ªè¾“å…¥å¯¿å‘½ï¼Œå…¶ä¸­ä¸€ä¸ªä¸º<code>&amp;self</code> æˆ– <code>&amp;mut self</code>ï¼Œ<code>self</code>çš„å¯¿å‘½å°†åº”ç”¨äºæ‰€æœ‰çœç•¥äº†å¯¿å‘½çš„è¿”å›å€¼ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_mut</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) -&gt; &amp;<span class="keyword">mut</span> T; </span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_mut</span></span>&lt;<span class="string">'a</span>&gt;(&amp;<span class="string">'a</span> <span class="keyword">mut</span> <span class="keyword">self</span>) -&gt; &amp;<span class="string">'a</span> <span class="keyword">mut</span> T;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»¥ä¸Šè¿™3ä¸ª<code>Rust</code>ä¸­çš„æ¦‚å¿µç¡®å®æ¯”è¾ƒéš¾æ‡‚ï¼Œæˆ‘æ˜¯æ ¹æ®è‡ªå·±çš„ç†è§£å†™çš„ï¼Œè‹¥æœ‰ä¸åŒè§‚ç‚¹è¯·çœ‹å®˜æ–¹åŸæ–‡ã€‚</p>
</blockquote>
<h2 id="structs">Structs</h2>
<p>ä¸Cè¯­è¨€çš„ç»“æ„ä½“ç±»ä¼¼ï¼Œå°†æŸäº›æ•°æ®ç±»å‹ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆæ–°çš„æ•°æ®ç»“æ„ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Point &#123;  <span class="comment">//åç§°ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼Œé‡‡ç”¨é©¼å³°å‘½åæ³•</span></span><br><span class="line">    x: <span class="keyword">i32</span>,     <span class="comment">//ä¸èƒ½å†™æˆmut x: i32,</span></span><br><span class="line">    y: <span class="keyword">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> origin = Point &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;; <span class="comment">//å®šä¹‰ä¸€ä¸ªPointç±»å‹çš„å˜é‡ç»‘å®šï¼Œå¹¶èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"The origin is at (&#123;&#125;, &#123;&#125;)"</span>, origin.x, origin.y);<span class="comment">//structå˜é‡è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> point = Point3d &#123; x: <span class="number">0</span>, y: <span class="number">0</span>, z: <span class="number">0</span> &#125;;</span><br><span class="line">point = Point3d &#123; y: <span class="number">1</span>, .. point &#125;;</span><br><span class="line"><span class="comment">//æ–°çš„ponit yä¸º1ï¼Œxå’Œzä½¿ç”¨åŸæ¥çš„pointçš„å€¼</span></span><br></pre></td></tr></table></figure>
<h3 id="tuple-structs">Tuple structs</h3>
<p>å®šä¹‰ä¸€ä¸ªç±»ä¼¼äº<code>tuple</code>çš„ç»“æ„ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Color(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>);</span><br><span class="line"><span class="keyword">struct</span> Point(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>);</span><br><span class="line"><span class="comment">//ä»¥ä¸‹ä¸¤ä¸ªå˜é‡ä¸ç›¸ç­‰</span></span><br><span class="line"><span class="keyword">let</span> black = Color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">let</span> origin = Point(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h3 id="unit-like-structs">Unit-like structs</h3>
<p>å¯ä»¥å®šä¹‰ä¸€ä¸ªæ— æˆå‘˜çš„ç»“æ„</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Electron;</span><br></pre></td></tr></table></figure>
<h2 id="enums">Enums</h2>
<p><code>Rust</code>çš„æšä¸¾ç±»å‹ï¼Œç±»å‹ä¸º<code>Message</code>çš„å˜é‡ç»‘å®šå¯ä»¥æ˜¯<code>Message</code>çš„å…¶ä¸­ä¹‹ä¸€</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title">Message</span> &#123;</span><br><span class="line">    Quit,</span><br><span class="line">    ChangeColor(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>),</span><br><span class="line">    Move &#123; x: <span class="keyword">i32</span>, y: <span class="keyword">i32</span> &#125;,</span><br><span class="line">    Write(<span class="built_in">String</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x: Message = Message::Move &#123; x: <span class="number">3</span>, y: <span class="number">4</span> &#125;;</span><br></pre></td></tr></table></figure>
<h2 id="match">Match</h2>
<p><code>matchè¡¨è¾¾å¼</code>ç±»ä¼¼äºCè¯­è¨€ä¸­çš„<code>switch</code></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> x &#123;</span><br><span class="line">    <span class="number">1</span> =&gt; <span class="built_in">println!</span>(<span class="string">"one"</span>),</span><br><span class="line">    <span class="number">2</span> =&gt; <span class="built_in">println!</span>(<span class="string">"two"</span>),</span><br><span class="line">    <span class="number">3</span> =&gt; <span class="built_in">println!</span>(<span class="string">"three"</span>),</span><br><span class="line">    <span class="number">4</span> =&gt; <span class="built_in">println!</span>(<span class="string">"four"</span>),</span><br><span class="line">    <span class="number">5</span> =&gt; <span class="built_in">println!</span>(<span class="string">"five"</span>),</span><br><span class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">"something else"</span>),<span class="comment">//å½“æ‰€æœ‰å€¼éƒ½ä¸åŒ¹é…æ—¶</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//xå¯ä»¥ä¸º`enum`ç±»å‹</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title">Message</span> &#123;</span><br><span class="line">    Quit,</span><br><span class="line">    ChangeColor(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>),</span><br><span class="line">    Move &#123; x: <span class="keyword">i32</span>, y: <span class="keyword">i32</span> &#125;,</span><br><span class="line">    Write(<span class="built_in">String</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">quit</span></span>() &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">change_color</span></span>(r: <span class="keyword">i32</span>, g: <span class="keyword">i32</span>, b: <span class="keyword">i32</span>) &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">move_cursor</span></span>(x: <span class="keyword">i32</span>, y: <span class="keyword">i32</span>) &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">process_message</span></span>(msg: Message) &#123;</span><br><span class="line">    <span class="keyword">match</span> msg &#123;</span><br><span class="line">        Message::Quit =&gt; quit(),</span><br><span class="line">        Message::ChangeColor(r, g, b) =&gt; change_color(r, g, b),</span><br><span class="line">        Message::Move &#123; x: x, y: y &#125; =&gt; move_cursor(x, y),</span><br><span class="line">        Message::Write(s) =&gt; <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, s),</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="patterns">Patterns</h2>
<p>æ¨¡å¼ï¼Œ<code>match</code>ä¸­xæ‰€åŒ¹é…çš„å°±æ˜¯æ¨¡å¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> x &#123;</span><br><span class="line">    <span class="number">1</span> | <span class="number">2</span> =&gt; <span class="built_in">println!</span>(<span class="string">"one"</span>), <span class="comment">//åŒ¹é…1æˆ–2</span></span><br><span class="line">    <span class="number">3</span> ... <span class="number">7</span> =&gt; <span class="built_in">println!</span>(<span class="string">"two"</span>),<span class="comment">//åŒ¹é…3, 4, 5, 6, 7</span></span><br><span class="line">    <span class="string">'a'</span> ... <span class="string">'j'</span> =&gt; <span class="built_in">println!</span>(<span class="string">"three"</span>),<span class="comment">//åŒ¹é…å­—æ¯aåˆ°j</span></span><br><span class="line">    e @ <span class="number">8</span> ... <span class="number">10</span> =&gt; <span class="built_in">println!</span>(<span class="string">"got a range element &#123;&#125;"</span>, e),<span class="comment">//è‹¥xä¸º10ï¼Œeæ‰€ç»‘å®šçš„å€¼å°±ä¸º10</span></span><br><span class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">"anything"</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒ¹é…æ•°æ®ç»“æ„çš„ä¸€éƒ¨åˆ†</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">Option</span>&lt;<span class="built_in">String</span>&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"Steve"</span>.to_string();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> x: <span class="built_in">Option</span>&lt;Person&gt; = <span class="built_in">Some</span>(Person &#123; name: <span class="built_in">Some</span>(name) &#125;);</span><br><span class="line"><span class="keyword">match</span> x &#123;</span><br><span class="line">    <span class="built_in">Some</span>(Person &#123; name: <span class="keyword">ref</span> a @ <span class="built_in">Some</span>(_), .. &#125;) =&gt; <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, a),</span><br><span class="line">    _ =&gt; &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒ¹é…æœ‰å˜é‡çš„æšä¸¾ç±»å‹ï¼Œä½¿ç”¨<code>..</code>æ¥å¿½ç•¥æ‰å‚æ•°</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title">OptionalInt</span> &#123;</span><br><span class="line">    Value(<span class="keyword">i32</span>),</span><br><span class="line">    Missing,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = OptionalInt::Value(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> y = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> x &#123;</span><br><span class="line">    OptionalInt::Value(i) <span class="keyword">if</span> i &gt; <span class="number">5</span> =&gt; <span class="built_in">println!</span>(<span class="string">"Got an int bigger than five!"</span>),<span class="comment">//æ·»åŠ ifä½œä¸ºåˆ¤æ–­</span></span><br><span class="line">    OptionalInt::Value(..) =&gt; <span class="built_in">println!</span>(<span class="string">"Got an int!"</span>),</span><br><span class="line">    OptionalInt::Missing =&gt; <span class="built_in">println!</span>(<span class="string">"No such luck."</span>),</span><br><span class="line">    <span class="keyword">ref</span> y =&gt; <span class="built_in">println!</span>(<span class="string">"Got a reference to &#123;&#125;"</span>, y),<span class="comment">//è·å–å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">ref</span> <span class="keyword">mut</span> mr =&gt; <span class="built_in">println!</span>(<span class="string">"Got a mutable reference to &#123;&#125;"</span>, mr),</span><br><span class="line">&#125;<span class="comment">//æœ€åè¾“å‡ºGot an int!</span></span><br></pre></td></tr></table></figure>
<p>åŒ¹é…<code>struct</code>ç±»å‹</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Point &#123;</span><br><span class="line">    x: <span class="keyword">i32</span>,</span><br><span class="line">    y: <span class="keyword">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> origin = Point &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> origin &#123;</span><br><span class="line">    Point &#123; x: x, y: y &#125; =&gt; <span class="built_in">println!</span>(<span class="string">"(&#123;&#125;,&#123;&#125;)"</span>, x, y),</span><br><span class="line">    Point &#123; x: x, .. &#125; =&gt; <span class="built_in">println!</span>(<span class="string">"x is &#123;&#125;"</span>, x),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šåˆ—å‡ºçš„åŒ¹é…å¯ä»¥ä»»æ„ç»„åˆåœ¨ä¸€èµ·ã€‚</p>
<h2 id="method-syntax">Method Syntax</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Circle &#123;</span><br><span class="line">    x: <span class="keyword">f64</span>,</span><br><span class="line">    y: <span class="keyword">f64</span>,</span><br><span class="line">    radius: <span class="keyword">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Circle &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span> &#123;</span><br><span class="line">        std::f64::consts::PI * (<span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> c = Circle &#123; x: <span class="number">0.0</span>, y: <span class="number">0.0</span>, radius: <span class="number">2.0</span> &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, c.area());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…ˆå®šä¹‰ä¸€ä¸ª<code>struct</code> å«<code>Circle</code>ï¼Œå†ç”¨<code>impl</code>å¾€<code>Circle</code>ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•<code>area</code>ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½ä¼šæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å‚æ•°ï¼Œå¯ä»¥æ˜¯<code>self</code>ï¼Œ<code>&amp;self</code>ï¼Œ<code>&amp;mut self</code>å…¶ä¸­ä¹‹ä¸€ã€‚ ä¼ å€¼æ–¹å¼ä¸<code>Functions</code>ä¸€èŠ‚ç›¸åŒã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­<code>self</code>æŒ‡ä»£çš„å°±æ˜¯<code>c</code>è¿™ä¸ªå˜é‡(ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„this)ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å¼•ç”¨ï¼Œè€Œä¸”ä¸€èˆ¬æƒ…å†µä¸‹ä¹Ÿéƒ½æ˜¯ä½¿ç”¨å¼•ç”¨ã€‚</p>
<h3 id="chaining-method-calls-é“¾å¼è°ƒç”¨">Chaining method calls(é“¾å¼è°ƒç”¨)</h3>
<p>é€šè¿‡è¿”å›<code>self</code>æ¥è¾¾åˆ°é“¾å¼è°ƒç”¨çš„ç›®çš„</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Circle &#123;</span><br><span class="line">    x: <span class="keyword">f64</span>,</span><br><span class="line">    y: <span class="keyword">f64</span>,</span><br><span class="line">    radius: <span class="keyword">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Circle &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span> &#123;</span><br><span class="line">        std::f64::consts::PI * (<span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">grow</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, increment: <span class="keyword">f64</span>) -&gt; &amp;Circle &#123;</span><br><span class="line">        <span class="keyword">self</span>.radius += increment;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> c = Circle &#123; x: <span class="number">0.0</span>, y: <span class="number">0.0</span>, radius: <span class="number">2.0</span> &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, c.area());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> d = c.grow(<span class="number">2.0</span>).area();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®˜æ–¹çš„ä»£ç æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„<code>Circle</code>ã€‚æ­¤å¤„æˆ‘åšäº†ä¸‹ä¿®æ”¹ä»¥æ›´ç¬¦åˆè¿”å›<code>self</code>çš„ä¸€èˆ¬æƒ…å†µã€‚</p>
<h3 id="associated-functions">Associated functions</h3>
<p>è”åˆå‡½æ•°ä¸éœ€è¦<code>self</code>å‚æ•°</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Circle &#123;</span><br><span class="line">    x: <span class="keyword">f64</span>,</span><br><span class="line">    y: <span class="keyword">f64</span>,</span><br><span class="line">    radius: <span class="keyword">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Circle &#123;</span><br><span class="line">    <span class="comment">//newæ–¹æ³•è¿”å›ä¸€ä¸ªCircle</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(x: <span class="keyword">f64</span>, y: <span class="keyword">f64</span>, radius: <span class="keyword">f64</span>) -&gt; Circle &#123;</span><br><span class="line">        Circle &#123;</span><br><span class="line">            x: x,</span><br><span class="line">            y: y,</span><br><span class="line">            radius: radius,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> c = Circle::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">2.0</span>);<span class="comment">//è”åˆå‡½æ•°çš„è°ƒç”¨æ–¹æ³•Struct::function()</span></span><br><span class="line">    <span class="comment">//ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„é™æ€æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="builder-pattern">Builder Pattern</h3>
<p>ä¸ºäº†ä½¿ç”¨æˆ·åªèƒ½ä¿®æ”¹<code>struct</code>ä¸­ç‰¹å®šçš„å±æ€§ï¼Œéœ€è¦ä½¿ç”¨å¦ä¸€ä¸ª<code>struct</code>æ¥ä½œé™åˆ¶ï¼Œå¦‚<code>Circle</code>çš„<code>CircleBuilder</code>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Circle &#123;</span><br><span class="line">    x: <span class="keyword">f64</span>,</span><br><span class="line">    y: <span class="keyword">f64</span>,</span><br><span class="line">    radius: <span class="keyword">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Circle &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span> &#123;</span><br><span class="line">        std::f64::consts::PI * (<span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> CircleBuilder &#123;</span><br><span class="line">    x: <span class="keyword">f64</span>,</span><br><span class="line">    y: <span class="keyword">f64</span>,</span><br><span class="line">    radius: <span class="keyword">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> CircleBuilder &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>() -&gt; CircleBuilder &#123;</span><br><span class="line">        CircleBuilder &#123; x: <span class="number">0.0</span>, y: <span class="number">0.0</span>, radius: <span class="number">1.0</span>, &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">x</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, coordinate: <span class="keyword">f64</span>) -&gt; &amp;<span class="keyword">mut</span> CircleBuilder &#123;</span><br><span class="line">        <span class="keyword">self</span>.x = coordinate;</span><br><span class="line">        <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">y</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, coordinate: <span class="keyword">f64</span>) -&gt; &amp;<span class="keyword">mut</span> CircleBuilder &#123;</span><br><span class="line">        <span class="keyword">self</span>.y = coordinate;</span><br><span class="line">        <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">radius</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, radius: <span class="keyword">f64</span>) -&gt; &amp;<span class="keyword">mut</span> CircleBuilder &#123;</span><br><span class="line">        <span class="keyword">self</span>.radius = radius;</span><br><span class="line">        <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">finalize</span></span>(&amp;<span class="keyword">self</span>) -&gt; Circle &#123;</span><br><span class="line">        Circle &#123; x: <span class="keyword">self</span>.x, y: <span class="keyword">self</span>.y, radius: <span class="keyword">self</span>.radius &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> c = CircleBuilder::new()</span><br><span class="line">                .x(<span class="number">1.0</span>)</span><br><span class="line">                .y(<span class="number">2.0</span>)</span><br><span class="line">                .radius(<span class="number">2.0</span>)</span><br><span class="line">                .finalize();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"area: &#123;&#125;"</span>, c.area());</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"x: &#123;&#125;"</span>, c.x);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"y: &#123;&#125;"</span>, c.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä½¿ç”¨<code>CircleBuilder</code>æ¥åˆ›å»º<code>Circle</code>ï¼Œå°±å¯ä»¥å¯¹<code>Circle</code>çš„åˆ›å»ºå’Œä¿®æ”¹åšå‡ºçº¦æŸã€‚</p>
<h2 id="vectors-å‘é‡">Vectors (å‘é‡)</h2>
<p>å‘é‡(<code>Vec&lt;T&gt;</code>)æ˜¯åŠ¨æ€å¯å¢é•¿çš„æ•°ç»„ï¼Œå­˜å‚¨åœ¨å †ä¸Šã€‚ä½¿ç”¨<code>vec!</code>å®åˆ›å»ºã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> v = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]; <span class="comment">// v: Vec&lt;i32&gt;</span></span><br><span class="line"><span class="keyword">let</span> v = <span class="built_in">vec!</span>[<span class="number">0</span>; <span class="number">10</span>]; <span class="comment">// 10 ä¸ª 0</span></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">"The third element of v is &#123;&#125;"</span>, v[<span class="number">2</span>]);<span class="comment">//ä¸‹æ ‡ä»0å¼€å§‹</span></span><br><span class="line"><span class="comment">//éå†å‘é‡</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &amp;v &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"A reference to &#123;&#125;"</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &amp;<span class="keyword">mut</span> v &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"A mutable reference to &#123;&#125;"</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> v &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"Take ownership of the vector and its element &#123;&#125;"</span>, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="strings">Strings</h2>
<p><code>Rust</code>æœ‰ä¸¤ç§å­—ç¬¦ä¸²ç±»å‹<code>&amp;str</code>(<code>&amp;'static str</code>)å’Œ<code>String</code>ï¼Œéƒ½æ˜¯UTF-8ç¼–ç (ä¸€ä¸ªå­—ç¬¦å 4å­—èŠ‚)</p>
<p><code>&amp;str</code>ç±»å‹çš„å­—ç¬¦ä¸²å¦‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string = <span class="string">"Hello there."</span>; <span class="comment">// string: &amp;'static str</span></span><br></pre></td></tr></table></figure>
<p>å­˜åœ¨äºé™æ€åŸŸï¼Œæ•´ä¸ªç¨‹åºéƒ½å¯ä»¥è®¿é—®ï¼Œå›ºå®šé•¿åº¦ï¼Œæ— æ³•è¢«ä¿®æ”¹ã€‚</p>
<p><code>String</code>æ˜¯åœ¨å †ä¸Šåˆ›å»ºçš„å­—ç¬¦ä¸²ï¼Œå¯åŠ é•¿ï¼Œé€šå¸¸ä½¿ç”¨<code>to_string</code>ä»<code>&amp;str</code>æ ¼å¼åŒ–å¾—åˆ°ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> s = <span class="string">"Hello"</span>.to_string(); <span class="comment">// mut s: String ä½¿ç”¨äº†to_string()æ–¹æ³•æ‰å¯ä»¥ä¿®æ”¹s</span></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, s);</span><br><span class="line"></span><br><span class="line">s.push_str(<span class="string">", world."</span>);</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, s);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨<code>&amp;</code>å°†<code>String</code>å¼ºåˆ¶æ ¼å¼åŒ–ä¸º<code>&amp;str</code></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">takes_slice</span></span>(slice: &amp;<span class="keyword">str</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"Got: &#123;&#125;"</span>, slice);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> s = <span class="string">"Hello"</span>.to_string();</span><br><span class="line">    takes_slice(&amp;s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„</strong>:  <code>String</code>å¯ä»¥è½»æ˜“åœ°å˜æˆ<code>&amp;str</code>ï¼Œä½†<code>&amp;str</code>æ ¼å¼åŒ–ä¸º<code>String</code>éœ€è¦åˆ†é…å†…å­˜(å› ä¸ºæ˜¯åœ¨å †ä¸Šåˆ›å»º)ï¼Œæ‰€ä»¥å¿…è¦æƒ…å†µä¸‹æ‰è¿™ä¹ˆåšã€‚</p>
</blockquote>
<h3 id="indexing">Indexing</h3>
<p>æ— æ³•é€šè¿‡<code>s[0]</code>æ¥è®¿é—®æŸä¸ªå­—ç¬¦ï¼Œå› ä¸ºå­—ç¬¦æ˜¯UTF-8ç¼–ç ï¼Œä½†å¯ä»¥è¿™æ ·åš</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hachiko = <span class="string">"å¿ çŠ¬ãƒãƒå…¬"</span>;</span><br><span class="line"><span class="keyword">let</span> dog = hachiko.chars().nth(<span class="number">1</span>); <span class="comment">// ç±»ä¼¼äº hachiko[1]</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„</strong>: chars()æ“ä½œéœ€è¦éå†æ•´ä¸ªå­—ç¬¦ä¸²</p>
</blockquote>
<h3 id="concatenation">Concatenation</h3>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ª<code>String</code>ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥å°†<code>&amp;str</code>ç±»å‹çš„å­—ç¬¦ä¸²è¿æ¥åˆ°æœ«å°¾ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hello = <span class="string">"Hello "</span>.to_string();</span><br><span class="line"><span class="keyword">let</span> world = <span class="string">"world!"</span>;</span><br><span class="line"><span class="keyword">let</span> hello_world = hello + world;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯ä¸¤ä¸ª<code>String</code>ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œè¿æ¥æ—¶ç¬¬äºŒä¸ªéœ€è¦è½¬æ¢ä¸º<code>&amp;str</code>ç±»å‹</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hello = <span class="string">"Hello "</span>.to_string();</span><br><span class="line"><span class="keyword">let</span> world = <span class="string">"world!"</span>.to_string();</span><br><span class="line"><span class="keyword">let</span> hello_world = hello + &amp;world;</span><br></pre></td></tr></table></figure>
<h2 id="generics-æ³›å‹">Generics(æ³›å‹)</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title">Option</span>&lt;T&gt; &#123;<span class="comment">//å®šä¹‰ä¸­çš„Tå¯ä»¥æ¢æˆå…¶ä»–å¤§å†™å­—æ¯</span></span><br><span class="line">    <span class="built_in">Some</span>(T),</span><br><span class="line">    <span class="built_in">None</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x: <span class="built_in">Option</span>&lt;<span class="keyword">i32</span>&gt; = <span class="built_in">Some</span>(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<p><code>&lt;T&gt;</code>è¯´æ˜è¯¥ç±»å‹æ˜¯æ³›å‹ã€‚</p>
<h3 id="generic-functions-æ³›å‹å‡½æ•°">Generic functions(æ³›å‹å‡½æ•°)</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">takes_anything</span></span>&lt;T&gt;(x: T) &#123;</span><br><span class="line">    <span class="comment">// do something with x</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">takes_two_of_the_same_things</span></span>&lt;T&gt;(x: T, y: T) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">takes_two_things</span></span>&lt;T, U&gt;(x: T, y: U) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="generic-structs-æ³›å‹ç»“æ„">Generic structs(æ³›å‹ç»“æ„)</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Point&lt;T&gt; &#123;</span><br><span class="line">    x: T,</span><br><span class="line">    y: T,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> int_origin = Point &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> float_origin = Point &#123; x: <span class="number">0.0</span>, y: <span class="number">0.0</span> &#125;;</span><br></pre></td></tr></table></figure>
<h2 id="traits">Traits</h2>
<p><code>Traits</code>çš„ä½œç”¨ç±»ä¼¼äºå…¶ä»–è¯­è¨€çš„æ¥å£ï¼Œæ¯”å¦‚Javaçš„Interfaceç±»å‹ã€‚åœ¨å…¶ä¸­å®šä¹‰çš„å‡½æ•°åªå†™å£°æ˜éƒ¨åˆ†ã€‚ç”¨äºçº¦æŸæ³›å‹ä¸­å¿…é¡»å®šä¹‰äº†å“ªäº›å‡½æ•°ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">print_area</span></span>&lt;T&gt;(shape: T) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"This shape has an area of &#123;&#125;"</span>, shape.area());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘çš„æ—¶å€™ä¼šå‘ç”Ÿé”™è¯¯ï¼Œå› ä¸ºæ³›å‹<code>T</code>æ— æ³•ä¿è¯æ˜¯å¦å®šä¹‰äº†<code>area()</code>å‡½æ•°ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨<code>Traits</code>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title">HasArea</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Circle &#123;</span><br><span class="line">    x: <span class="keyword">f64</span>,</span><br><span class="line">    y: <span class="keyword">f64</span>,</span><br><span class="line">    radius: <span class="keyword">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> HasArea <span class="keyword">for</span> Circle &#123;   <span class="comment">//è¯­æ³•impl Trait for Item</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span> &#123;</span><br><span class="line">        std::f64::consts::PI * (<span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Square &#123;</span><br><span class="line">    x: <span class="keyword">f64</span>,</span><br><span class="line">    y: <span class="keyword">f64</span>,</span><br><span class="line">    side: <span class="keyword">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> HasArea <span class="keyword">for</span> Square &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.side * <span class="keyword">self</span>.side</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">print_area</span></span>&lt;T: HasArea&gt;(shape: T) &#123;<span class="comment">//T: HasArea æ„æ€æ˜¯æ‰€æœ‰å®ç°äº†HasArea traitçš„ç±»å‹</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"This shape has an area of &#123;&#125;"</span>, shape.area());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> c = Circle &#123;</span><br><span class="line">        x: <span class="number">0.0f64</span>,</span><br><span class="line">        y: <span class="number">0.0f64</span>,</span><br><span class="line">        radius: <span class="number">1.0f64</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> s = Square &#123;</span><br><span class="line">        x: <span class="number">0.0f64</span>,</span><br><span class="line">        y: <span class="number">0.0f64</span>,</span><br><span class="line">        side: <span class="number">1.0f64</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    print_area(c);</span><br><span class="line">    print_area(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é™¤äº†è‡ªå®šä¹‰çš„ç±»å‹å¤–ï¼Œä¹Ÿå¯ä»¥ä¸ºåŸºæœ¬ç±»å‹æˆ–è€…å…¶ä»–å·²æœ‰ç±»å‹å®ç°è‡ªå·±çš„<code>Trait</code>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title">HasArea</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> HasArea <span class="keyword">for</span> <span class="keyword">i32</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"this is silly"</span>);</span><br><span class="line"></span><br><span class="line">        *<span class="keyword">self</span> <span class="keyword">as</span> <span class="keyword">f64</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.area();</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <code>trait</code>åŒæ ·æœ‰ä½œç”¨åŸŸï¼Œè¶…å‡ºä½œç”¨åŸŸå°±æ— æ³•ä½¿ç”¨ã€‚</p>
</blockquote>
<p>å®ç°å¤šä¸ª<code>trait</code>ä½¿ç”¨<code>+</code>ç¬¦å·</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::Debug;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">foo</span></span>&lt;T: <span class="built_in">Clone</span> + Debug&gt;(x: T) &#123;</span><br><span class="line">    x.clone();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="whereä»å¥">whereä»å¥</h3>
<p>ä¸ºäº†é¿å…åœ¨å¤š<code>trait</code>åœ¨å£°æ˜å‚æ•°æ—¶è¿‡é•¿ï¼Œä½¿ç”¨<code>where</code>ä»å¥</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::Debug;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">foo</span></span>&lt;T: <span class="built_in">Clone</span>, K: <span class="built_in">Clone</span> + Debug&gt;(x: T, y: K) &#123;</span><br><span class="line">    x.clone();</span><br><span class="line">    y.clone();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸Šé¢çš„å†™æ³•å¯ä»¥å†™ä¸º</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">bar</span></span>&lt;T, K&gt;(x: T, y: K) <span class="keyword">where</span> T: <span class="built_in">Clone</span>, K: <span class="built_in">Clone</span> + Debug &#123;</span><br><span class="line">    x.clone();</span><br><span class="line">    y.clone();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    foo(<span class="string">"Hello"</span>, <span class="string">"world"</span>);</span><br><span class="line">    bar(<span class="string">"Hello"</span>, <span class="string">"workd"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="default-methods-é»˜è®¤æ–¹æ³•">Default methods (é»˜è®¤æ–¹æ³•)</h3>
<p>åœ¨<code>trait</code>ä¸­ä¹Ÿå¯ä»¥åŒ…å«é»˜è®¤çš„æ–¹æ³•(å¯ä»¥æ˜¯å¤šä¸ª)ï¼Œå³åœ¨å®šä¹‰<code>trait</code>æ—¶å°±è¢«å®ç°çš„å‡½æ•°ï¼Œæ‰€ä»¥åœ¨å®ç°<code>trait</code>æ—¶å°±ä¸éœ€è¦å®ç°å·²ç»è¢«å®ç°çš„å‡½æ•°ï¼Œä½†ä»å¯é‡å†™è¯¥å‡½æ•°ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title">Foo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">bar</span></span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">baz</span></span>(&amp;<span class="keyword">self</span>) &#123; <span class="built_in">println!</span>(<span class="string">"We called baz."</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> UseDefault;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Foo <span class="keyword">for</span> UseDefault &#123;<span class="comment">//åªéœ€è¦å®ç°bar()ï¼Œå› ä¸ºbazå·²ç»åœ¨å®šä¹‰trait Fooæ—¶è¢«å®ç°äº†</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">bar</span></span>(&amp;<span class="keyword">self</span>) &#123; <span class="built_in">println!</span>(<span class="string">"We called bar."</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> OverrideDefault;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Foo <span class="keyword">for</span> OverrideDefault &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">bar</span></span>(&amp;<span class="keyword">self</span>) &#123; <span class="built_in">println!</span>(<span class="string">"We called bar."</span>); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">baz</span></span>(&amp;<span class="keyword">self</span>) &#123; <span class="built_in">println!</span>(<span class="string">"Override baz!"</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="inheritance-ç»§æ‰¿">Inheritance (ç»§æ‰¿)</h3>
<p>å½“å®ç°<code>Foo</code>æ—¶ä¹Ÿéœ€è¦å®ç°<code>FooBar</code></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title">Foo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">foo</span></span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">trait</span> <span class="title">FooBar</span> : Foo &#123;  <span class="comment">//ä½¿ç”¨ ":"ç¬¦å·æ¥å®ç°traitçš„ç»§æ‰¿</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">foobar</span></span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Baz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Foo <span class="keyword">for</span> Baz &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">foo</span></span>(&amp;<span class="keyword">self</span>) &#123; <span class="built_in">println!</span>(<span class="string">"foo"</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> FooBar <span class="keyword">for</span> Baz &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">foobar</span></span>(&amp;<span class="keyword">self</span>) &#123; <span class="built_in">println!</span>(<span class="string">"foobar"</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="drop">Drop</h2>
<p><code>Drop</code>æ˜¯<code>trait</code>ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå‡½æ•°ï¼Œç±»ä¼¼äºææ„å‡½æ•°ï¼Œå½“å˜é‡ç»‘å®šç¦»å¼€ä½œç”¨åŸŸå<code>Drop</code>æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ï¼Œå¸¸ç”¨æ¥é‡Šæ”¾ä¸å†ä½¿ç”¨çš„èµ„æºã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> HasDrop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="built_in">Drop</span> <span class="keyword">for</span> HasDrop &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">drop</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"Dropping!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x = HasDrop;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// do stuff</span></span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// x åœ¨è¿™é‡Œç¦»å¼€mainçš„ä½œç”¨åŸŸ</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„:</strong> åŒä¸€ä½œç”¨åŸŸä¸­çš„å˜é‡ç¦»å¼€ä½œç”¨åŸŸåè¢«é‡Šæ”¾çš„é¡ºåºä¸è¢«å®šä¹‰çš„é¡ºåºç›¸åã€‚</p>
</blockquote>
<h2 id="if-let">if let</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†</span></span><br><span class="line"><span class="keyword">match</span> option &#123;</span><br><span class="line">    <span class="built_in">Some</span>(x) =&gt; &#123; foo(x) &#125;,</span><br><span class="line">    <span class="built_in">None</span> =&gt; &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†™æˆ</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="built_in">Some</span>(x) = option &#123;</span><br><span class="line">    foo(x);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    bar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨while let å°†</span></span><br><span class="line"><span class="keyword">loop</span> &#123;</span><br><span class="line">    <span class="keyword">match</span> option &#123;</span><br><span class="line">        <span class="built_in">Some</span>(x) =&gt; <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, x),</span><br><span class="line">        _ =&gt; <span class="keyword">break</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†™æˆ</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">let</span> <span class="built_in">Some</span>(x) = option &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="trait-objects">Trait Objects</h2>
<h3 id="dynamic-dispatch">Dynamic dispatch</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title">Foo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">method</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Foo <span class="keyword">for</span> <span class="keyword">u8</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">method</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span> &#123; <span class="built_in">format!</span>(<span class="string">"u8: &#123;&#125;"</span>, *<span class="keyword">self</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Foo <span class="keyword">for</span> <span class="built_in">String</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">method</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span> &#123; <span class="built_in">format!</span>(<span class="string">"string: &#123;&#125;"</span>, *<span class="keyword">self</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">do_something</span></span>(x: &amp;Foo) &#123;<span class="comment">//&amp;Fooå¯ä»¥ä½œä¸ºä¸€ç§ç±»å‹æ¥ä½¿ç”¨ï¼Œxä¹Ÿå°±æ˜¯Trait Objects</span></span><br><span class="line">    x.method();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">5u8</span>;</span><br><span class="line">    do_something(&amp;x <span class="keyword">as</span> &amp;Foo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="closures-é—­åŒ…">Closures (é—­åŒ…)</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> plus_one = |x: <span class="keyword">i32</span>| x + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert_eq!</span>(<span class="number">2</span>, plus_one(<span class="number">1</span>));<span class="comment">//æ–­è¨€ï¼Œè°ƒè¯•ç”¨</span></span><br><span class="line"><span class="comment">//é—­åŒ…ä¹Ÿå¯ä»¥å†™æˆ</span></span><br><span class="line"><span class="keyword">let</span> plus_two = |x| &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> result: <span class="keyword">i32</span> = x;</span><br><span class="line"></span><br><span class="line">    result += <span class="number">1</span>;</span><br><span class="line">    result += <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    result</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºäº†ä¸€ä¸ªç»‘å®š<code>plus_one</code>ï¼Œå¹¶æŒ‡æ´¾ç»™ä¸€ä¸ªé—­åŒ…ã€‚åœ¨<code>|</code>ä¹‹é—´çš„æ˜¯é—­åŒ…çš„å‚æ•°ï¼Œåé¢è·Ÿç€é—­åŒ…çš„ä¸»ä½“ã€‚é—­åŒ…å¯ä»¥ä¸æŒ‡å®šå‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹ã€‚</p>
<p>å°†é—­åŒ…ä½œä¸ºå‡½æ•°ä¼ é€’</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">call_with_one</span></span>&lt;F&gt;(some_closure: F) -&gt; <span class="keyword">i32</span></span><br><span class="line">    <span class="keyword">where</span> F : <span class="built_in">Fn</span>(<span class="keyword">i32</span>) -&gt; <span class="keyword">i32</span> &#123;</span><br><span class="line"></span><br><span class="line">    some_closure(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> answer = call_with_one(|x| x + <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert_eq!</span>(<span class="number">3</span>, answer);</span><br></pre></td></tr></table></figure>
<p>æœ‰ç‚¹åƒå‡½æ•°å¼ç¼–ç¨‹çš„åŒ¿åå‡½æ•°ã€‚æ—¢ç„¶èƒ½ä¼ å…¥ï¼Œå½“ç„¶ä¹Ÿèƒ½å½“åšè¿”å›å€¼ã€‚</p>
<h2 id="universal-function-call-syntax">Universal Function Call Syntax</h2>
<p>å½“å‡½æ•°æœ‰ç›¸åŒåå­—æ—¶</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title">Foo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">f</span></span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">trait</span> <span class="title">Bar</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">f</span></span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Baz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Foo <span class="keyword">for</span> Baz &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">f</span></span>(&amp;<span class="keyword">self</span>) &#123; <span class="built_in">println!</span>(<span class="string">"Bazâ€™s impl of Foo"</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Bar <span class="keyword">for</span> Baz &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">f</span></span>(&amp;<span class="keyword">self</span>) &#123; <span class="built_in">println!</span>(<span class="string">"Bazâ€™s impl of Bar"</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = Baz;</span><br><span class="line"><span class="comment">//b.f()ä¼šå‘ç”Ÿé”™è¯¯</span></span><br><span class="line">Foo::f(&amp;b);</span><br><span class="line">Bar::f(&amp;b);</span><br><span class="line"></span><br><span class="line">&lt;Type <span class="keyword">as</span> Trait&gt;::method(args);</span><br><span class="line"></span><br><span class="line"><span class="keyword">trait</span> <span class="title">Foo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">clone</span></span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#[derive(Clone)]</span></span><br><span class="line"><span class="keyword">struct</span> Bar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Foo <span class="keyword">for</span> Bar &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">clone</span></span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">"Making a clone of Bar"</span>);</span><br><span class="line"></span><br><span class="line">        &lt;Bar <span class="keyword">as</span> <span class="built_in">Clone</span>&gt;::clone(<span class="keyword">self</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è°ƒç”¨Clone traitä¸­çš„ clone()</span></span><br></pre></td></tr></table></figure>
<h2 id="attributes">Attributes</h2>
<p>å±æ€§çš„å£°æ˜ï¼Œç±»ä¼¼äº<code>#[]</code>éƒ½æ˜¯å±æ€§ï¼Œå±æ€§ç”¨äºæä¾›æŸäº›è¾…åŠ©ä½œç”¨ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#[foo]</span><span class="comment">//è¯¥å±æ€§ä½œç”¨äºå®ƒçš„ä¸‹ä¸€æ¡è¯­å¥</span></span><br><span class="line"><span class="keyword">struct</span> Foo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">mod</span> bar &#123;</span><br><span class="line">    <span class="preprocessor">#![bar]</span><span class="comment">//è¯¥å±æ€§ä½œç”¨äºåŒ…å«å®ƒçš„è¯­å¥ï¼Œåœ¨è¿™é‡Œå°±æ˜¯modå£°æ˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="type-aliases-ç±»å‹åˆ«å">type Aliases (ç±»å‹åˆ«å)</h2>
<p>ç±»ä¼¼äºCè¯­è¨€çš„<code>typedef</code></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title">Name</span> = <span class="built_in">String</span>;</span><br><span class="line"><span class="keyword">let</span> x: Name = <span class="string">"Hello"</span>.to_string();</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title">Result</span>&lt;T&gt; = result::<span class="built_in">Result</span>&lt;T, ConcreteError&gt;;</span><br></pre></td></tr></table></figure>
<h2 id="casting-between-types-ç±»å‹è½¬æ¢">Casting Between Types (ç±»å‹è½¬æ¢)</h2>
<p>ä¸€èˆ¬çš„ç±»å‹è½¬æ¢ä½¿ç”¨<code>as</code>ï¼Œå¼ºåˆ¶ç±»å‹è½¬æ¢ä½¿ç”¨<code>transmute</code>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x: <span class="keyword">i32</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> y = x <span class="keyword">as</span> <span class="keyword">i64</span>;</span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">0u8</span>, <span class="number">0u8</span>, <span class="number">0u8</span>, <span class="number">0u8</span>];</span><br><span class="line"><span class="keyword">let</span> b = a <span class="keyword">as</span> <span class="keyword">u32</span>; <span class="comment">// ä½¿ç”¨asè½¬æ¢å°†å‡ºé”™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> std::mem;</span><br><span class="line"></span><br><span class="line"><span class="keyword">unsafe</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> a = [<span class="number">0u8</span>, <span class="number">0u8</span>, <span class="number">0u8</span>, <span class="number">0u8</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> b = mem::transmute::&lt;[<span class="keyword">u8</span>; <span class="number">4</span>], <span class="keyword">u32</span>&gt;(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="operators-and-overloading-æ“ä½œç¬¦å’Œé‡è½½">Operators and Overloading (æ“ä½œç¬¦å’Œé‡è½½)</h2>
<p>ä½¿ç”¨<code>Add</code>traitæ¥å¯¹<code>+</code>è¿›è¡Œé‡è½½</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::ops::Add;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> Point &#123;</span><br><span class="line">    x: <span class="keyword">i32</span>,</span><br><span class="line">    y: <span class="keyword">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Add <span class="keyword">for</span> Point &#123;</span><br><span class="line">    <span class="keyword">type</span> <span class="title">Output</span> = Point;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">add</span></span>(<span class="keyword">self</span>, other: Point) -&gt; Point &#123;</span><br><span class="line">        Point &#123; x: <span class="keyword">self</span>.x + other.x, y: <span class="keyword">self</span>.y + other.y &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> p1 = Point &#123; x: <span class="number">1</span>, y: <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">let</span> p2 = Point &#123; x: <span class="number">2</span>, y: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> p3 = p1 + p2;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, p3);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿˜å¯ä»¥ä¸ºä¸åŒç±»å‹ä¹‹é—´çš„æ•°æ®é‡è½½åŠ æ³•è¿ç®—</span></span><br><span class="line"><span class="keyword">impl</span> Add&lt;<span class="keyword">i32</span>&gt; <span class="keyword">for</span> Point &#123;</span><br><span class="line">    <span class="keyword">type</span> <span class="title">Output</span> = <span class="keyword">f64</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">add</span></span>(<span class="keyword">self</span>, rhs: <span class="keyword">i32</span>) -&gt; <span class="keyword">f64</span> &#123;</span><br><span class="line">        <span class="comment">// add an i32 to a Point and get an f64</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p: Point = <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">let</span> x: <span class="keyword">f64</span> = p + <span class="number">2i32</span>;</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒé¡µé¢">å‚è€ƒé¡µé¢</h2>
<ul>
<li><a href="http://doc.rust-lang.org/book/README.html" target="_blank" rel="external">The Rust Programming Language</a></li>
<li><a href="http://blog.csdn.net/liigo/article/details/45757123" target="_blank" rel="external">ä¸ºä»€ä¹ˆæˆ‘è¯´Rustæ˜¯é è°±çš„ç¼–ç¨‹è¯­è¨€</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://lin-h.com/2015/05/28/rust-quick-guide/" data-id="cijofw1rj000ao455daeqlybn" class="article-share-link">Share</a>
      
        <a href="http://lin-h.com/2015/05/28/rust-quick-guide/#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/">Rust</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/06/14/git-undo-operation/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Gitçš„å„ç§æ’¤é”€æ“ä½œ
        
      </div>
    </a>
  
  
    <a href="/2015/04/09/build-personal-blog-with-jekyll-on-github/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ä½¿ç”¨Jekyllåœ¨Githubä¸Šæ­å»ºä¸ªäººBlog</div>
    </a>
  
</nav>


  
</article>

  <section id="comments">
    <div id="ds-thread" class="ds-thread" data-thread-key="http://lin-h.com/2015/05/28/rust-quick-guide/" data-title="Rustå¿«é€Ÿå…¥é—¨" data-url="http://lin-h.com/2015/05/28/rust-quick-guide/">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by DuoShuo.</a></noscript>
      </div>
  </section>

</section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">recents</h3>
    <div class="widget">
      <ul id="recent-post" class="">
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2016/01/20/json-web-token/" class="thumbnail">
  
    <span style="background-image:url(http://linhsblog-10013469.image.myqcloud.com/images/jwt-diagram.png)" alt="Json Web Tokenèº«ä»½è®¤è¯" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Node-js/">Node.js</a></p>
              <p class="item-title"><a href="/2016/01/20/json-web-token/" class="title">Json Web Tokenèº«ä»½è®¤è¯</a></p>
              <p class="item-date"><time datetime="2016-01-20T14:31:33.285Z" itemprop="datePublished">2016-01-20</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2015/12/27/inner-scroll/" class="thumbnail">
  
    <span style="background-image:url(http://linhsblog-10013469.image.myqcloud.com/images/inner-scroll.png)" alt="å†…æ»šåŠ¨" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Javascript/">Javascript</a></p>
              <p class="item-title"><a href="/2015/12/27/inner-scroll/" class="title">å†…æ»šåŠ¨</a></p>
              <p class="item-date"><time datetime="2015-12-27T05:44:45.000Z" itemprop="datePublished">2015-12-27</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2015/12/19/try-angular2/" class="thumbnail">
  
    <span style="background-image:url(http://linhsblog-10013469.image.myqcloud.com/images/angular2.jpg)" alt="ä½“éªŒAngular2" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Javascript/">Javascript</a></p>
              <p class="item-title"><a href="/2015/12/19/try-angular2/" class="title">ä½“éªŒAngular2</a></p>
              <p class="item-date"><time datetime="2015-12-19T14:42:59.000Z" itemprop="datePublished">2015-12-19</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2015/12/12/2015-november-summary/" class="thumbnail">
  
    <span style="background-image:url(http://linhsblog-10013469.image.myqcloud.com/images/november.png)" alt="å¹¿å·11æœˆä»½å®ä¹ " class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Others/">Others</a></p>
              <p class="item-title"><a href="/2015/12/12/2015-november-summary/" class="title">å¹¿å·11æœˆä»½å®ä¹ </a></p>
              <p class="item-date"><time datetime="2015-12-12T15:16:37.000Z" itemprop="datePublished">2015-12-12</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2015/11/11/css3-animation/" class="thumbnail">
  
    <span style="background-image:url(http://linhsblog-10013469.image.myqcloud.com/images/twitter-bird-sprite.png)" alt="CSS3 Animation" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/CSS/">CSS</a></p>
              <p class="item-title"><a href="/2015/11/11/css3-animation/" class="title">CSS3 Animation</a></p>
              <p class="item-date"><time datetime="2015-11-11T13:22:45.000Z" itemprop="datePublished">2015-11-11</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rust/">Rust</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jekyll/">jekyll</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular2/">Angular2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rust/">Rust</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/">css3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">tag cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular2/" style="font-size: 10px;">Angular2</a> <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/Javascript/" style="font-size: 20px;">Javascript</a> <a href="/tags/Node-js/" style="font-size: 10px;">Node.js</a> <a href="/tags/Rust/" style="font-size: 10px;">Rust</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/life/" style="font-size: 20px;">life</a> <a href="/tags/node-js/" style="font-size: 10px;">node.js</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 - 2016 Lin-H<br>
      <span id="busuanzi_container_site_pv" style='display:none'><span id="busuanzi_value_site_pv"></span> Views</span><br/>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. <span id='cnzz_stat_icon_1257359120'></span>
    </div>
  </div>
</footer>
    

<script type="text/javascript">
  var duoshuoQuery = {short_name:"lin-h"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



 <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<link rel="stylesheet" href="//apps.bdimg.com/libs/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<script src="//apps.bdimg.com/libs/fancybox/2.1.5/jquery.fancybox.pack.js" type="text/javascript"></script>

<script src="/js/script.js" type="text/javascript"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1257359120%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
  </div>
</body>
</html>